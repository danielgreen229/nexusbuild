import{h as F,A as f,_ as P,k as y,E as v,r as z,c as i,o as d,a as s,f as m,z as K,i as J,v as V,t as c,d as p,F as C,j as M,n as W}from"./D_JQTfwH.js";const G=F("domain",{state:()=>({loading:!1,error:null,searchResults:[],lastSearchKeyword:null,lastDeploy:null,netlifySites:[],siteInfo:null,dnsStatuses:{}}),getters:{isLoading(e){return e.loading},hasError(e){return!!e.error},getDnsStatus:e=>t=>e.dnsStatuses[t]||null},actions:{async parseResponse(e){const t=await e.json().catch(()=>null);if(!e.ok){const a=t&&(t.data||t.description||t.message)||e.statusText||"Network error";throw new Error(a)}return t&&(t.status==="200"||t.status===200)||t&&t.data!==void 0?t.data:t},async searchSimilarDomains(e,t={}){if(!e||typeof e!="string")throw new Error("keyword –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω");this.loading=!0,this.error=null;try{const a={keyword:e,...t.tlds?{tlds:t.tlds}:{},...t.maxResults?{maxResults:t.maxResults}:{},...t.batchSize?{batchSize:t.batchSize}:{}},u=await fetch(`${f.fullUrl}/deploy/search-similar-domains`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),o=await this.parseResponse(u);return o&&Array.isArray(o.results)?this.searchResults=o.results:Array.isArray(o)?this.searchResults=o:this.searchResults=o?o.results||[]:[],this.lastSearchKeyword=e,this.searchResults}catch(a){throw this.error=a.message||"–û—à–∏–±–∫–∞ –ø–æ–∏—Å–∫–∞ –¥–æ–º–µ–Ω–æ–≤",a}finally{this.loading=!1}},async deployWithDomain({templateId:e,domain:t,period:a=1}){if(!e||!t)throw new Error("templateId –∏ domain –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã");this.loading=!0,this.error=null;try{const u=await fetch(`${f.fullUrl}/deploy/deploy-with-domain`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({templateId:e,domain:t,period:a})}),o=await this.parseResponse(u);return this.lastDeploy=o,o}catch(u){throw this.error=u.message||"–û—à–∏–±–∫–∞ –¥–µ–ø–ª–æ—è",u}finally{this.loading=!1}},async attachDomain(e,t){if(!e||!t)throw new Error("siteId –∏ domain –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã");this.loading=!0,this.error=null;try{const a=await fetch(`${f.fullUrl}/deploy/attach-domain`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({siteId:e,domain:t})});return await this.parseResponse(a)}catch(a){throw this.error=a.message||"–û—à–∏–±–∫–∞ attach",a}finally{this.loading=!1}},async attachDomainByName(e,t){if(!e||!t)throw new Error("siteName –∏ domain –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã");this.loading=!0,this.error=null;try{const a=await fetch(`${f.fullUrl}/deploy/attach-domain-by-name`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({siteName:e,domain:t})});return await this.parseResponse(a)}catch(a){throw this.error=a.message||"–û—à–∏–±–∫–∞ attach by name",a}finally{this.loading=!1}},async verifySite(e){if(!e)throw new Error("siteId –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω");this.loading=!0,this.error=null;try{const t=await fetch(`${f.fullUrl}/deploy/verify-site/${encodeURIComponent(e)}`),a=await this.parseResponse(t);return this.siteInfo=a,a}catch(t){throw this.error=t.message||"–û—à–∏–±–∫–∞ verify",t}finally{this.loading=!1}},async fetchNetlifySites(){this.loading=!0,this.error=null;try{const e=await fetch(`${f.fullUrl}/deploy/netlify-sites`),t=await this.parseResponse(e);return this.netlifySites=Array.isArray(t)?t:t?[t]:[],this.netlifySites}catch(e){throw this.error=e.message||"–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è —Å–∞–π—Ç–æ–≤",e}finally{this.loading=!1}},async checkDns(e){if(!e)throw new Error("domain –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω");this.loading=!0,this.error=null;try{const t=await fetch(`${f.fullUrl}/deploy/check-dns/${encodeURIComponent(e)}`),a=await this.parseResponse(t);return a&&a.domain?this.dnsStatuses[a.domain]=a.dns_status:a&&a.dns_status&&(this.dnsStatuses[e]=a.dns_status),a}catch(t){throw this.error=t.message||"–û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ DNS",t}finally{this.loading=!1}},clearError(){this.error=null},resetSearch(){this.searchResults=[],this.lastSearchKeyword=null}}}),H={class:"df-root"},Q={class:"df-container"},X={class:"df-search-card"},Y={class:"df-row"},Z={class:"df-row df-row--inline"},tt={class:"df-actions"},st=["disabled"],et={key:0},at={key:1},nt={key:0,class:"df-error"},rt={key:0,class:"df-results"},lt={class:"df-results-header"},ot={class:"df-table"},it={class:"td-domain"},dt={class:"domain-name"},ut={class:"domain-sub"},ct={key:0},ht={key:1},ft={key:2,class:"muted"},yt={class:"td-actions"},pt=["onClick"],mt=["disabled","onClick"],wt={key:0,class:"df-empty"},_t={key:2,class:"df-deploy-result"},vt={class:"deploy-grid"},gt={key:0},bt=["href"],St={key:1},kt=["href"],Rt={__name:"domain-finder",emits:["select-domain"],setup(e,{emit:t}){const a=G(),u=t,o=y(""),g=y(""),T=y(20),b=v(()=>a.loading),S=v(()=>a.error),w=v(()=>a.searchResults),$=v(()=>a.lastSearchKeyword),x=y(!1);y(!1);const N=y(null),h=y(null),_=z({domain:"",templateId:"",period:1,waitForDns:!0});async function E(){if(!o.value||!o.value.trim())return;const n={maxResults:T.value};g.value&&g.value.trim()&&(n.tlds=g.value.split(",").map(r=>r.trim()).filter(Boolean));try{await a.searchSimilarDomains(o.value.trim(),n)}catch{}}function U(n){return n===!0||n==="available"||typeof n=="string"&&n.toLowerCase&&n.toLowerCase().includes("—Å–≤–æ–±–æ–¥")?"–°–≤–æ–±–æ–¥–µ–Ω":n===!1?"–ó–∞–Ω—è—Ç":"–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ"}function A(n){return n===!0||n==="available"?"badge-available":n===!1?"badge-taken":"badge-unknown"}function k(n){return n===!0||n==="available"||typeof n=="string"&&n.toLowerCase&&n.toLowerCase().includes("—Å–≤–æ–±–æ–¥")}function I(n,r){return n==null?"‚Äî":`${n} ${r||"RUB"}`}function O(n){if(!n)return"";const r=n.split(".");return r.length?r[r.length-1]:""}function j(n){const r=`https://www.whois.com/whois/${encodeURIComponent(n)}`;window.open(r,"_blank")}function L(n){_.domain=n,_.templateId="",_.period=1,_.waitForDns=!0,N.value=null,x.value=!0}function q(n){u("select-domain",n),L(n.fqdn)}return(n,r)=>(d(),i("div",H,[s("main",Q,[s("section",X,[s("form",{onSubmit:K(E,["prevent"]),class:"df-form"},[s("div",Y,[r[1]||(r[1]=s("label",{class:"df-label"},"–ö–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ",-1)),J(s("input",{"onUpdate:modelValue":r[0]||(r[0]=l=>o.value=l),class:"df-input",placeholder:"–ù–∞–ø—Ä–∏–º–µ—Ä: mybrand"},null,512),[[V,o.value]])]),s("div",Z,[s("div",tt,[s("button",{disabled:b.value,class:"btn btn-primary",type:"submit"},[b.value?(d(),i("span",at,"–ò–¥—ë—Ç –ø–æ–∏—Å–∫...")):(d(),i("span",et,"–ü–æ–∏—Å–∫"))],8,st)])])],32),S.value?(d(),i("div",nt,c(S.value),1)):m("",!0)]),w.value&&w.value.length?(d(),i("section",rt,[s("div",lt,[s("div",null,[r[2]||(r[2]=p("–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–¥–±–æ—Ä–∞ –¥–ª—è ¬´")),s("strong",null,c($.value),1),p("¬ª ‚Äî "+c(w.value.length),1)])]),s("table",ot,[r[3]||(r[3]=s("thead",null,[s("tr",null,[s("th",null,"–î–æ–º–µ–Ω"),s("th",null,"–°—Ç–∞—Ç—É—Å"),s("th",null,"–¶–µ–Ω–∞"),s("th",null,"TLD"),s("th")])],-1)),s("tbody",null,[(d(!0),i(C,null,M(w.value,l=>{var R,D;return d(),i("tr",{key:l.fqdn},[s("td",it,[s("div",dt,c(l.fqdn),1),s("div",ut,c(((D=(R=l.attrs)==null?void 0:R.raw)==null?void 0:D.fqdn)||l.fqdn),1)]),s("td",null,[s("span",{class:W(["badge",A(l.available)])},c(U(l.available)),3)]),s("td",null,[k(l.available)?l.price!==null&&l.price!==void 0?(d(),i("div",ht,c(I(l.price,l.price_currency)),1)):(d(),i("div",ft,"‚Äî")):(d(),i("div",ct,"-"))]),s("td",null,c(l.tld||O(l.fqdn)),1),s("td",yt,[s("button",{class:"btn small",onClick:B=>j(l.fqdn)},"Whois",8,pt),s("button",{class:"btn primary small",disabled:!k(l.available)||l.price==null,onClick:B=>q(l)}," –í—ã–±—Ä–∞—Ç—å ",8,mt)])])}),128))])])])):(d(),i(C,{key:1},[b.value?m("",!0):(d(),i("section",wt,r[4]||(r[4]=[s("div",{class:"empty-illustration"},"üîé",-1),s("div",{class:"empty-sub"},"–í–≤–µ–¥–∏—Ç–µ –∫–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ –∏ –Ω–∞–∂–º–∏—Ç–µ ¬´–ü–æ–∏—Å–∫¬ª, —á—Ç–æ–±—ã –ø–æ–¥–æ–±—Ä–∞—Ç—å –¥–æ–º–µ–Ω",-1)])))],64)),h.value?(d(),i("section",_t,[r[9]||(r[9]=s("h3",null,"–†–µ–∑—É–ª—å—Ç–∞—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏/–¥–µ–ø–ª–æ—è",-1)),s("div",vt,[s("div",null,[r[5]||(r[5]=p("–î–æ–º–µ–Ω: ")),s("strong",null,c(h.value.domain),1)]),h.value.netlify_url?(d(),i("div",gt,[r[6]||(r[6]=p("Netlify: ")),s("a",{href:h.value.netlify_url,target:"_blank"},"–æ—Ç–∫—Ä—ã—Ç—å —Å–∞–π—Ç",8,bt)])):m("",!0),h.value.admin_url?(d(),i("div",St,[r[7]||(r[7]=p("Admin: ")),s("a",{href:h.value.admin_url,target:"_blank"},"–∞–¥–º–∏–Ω–∫–∞",8,kt)])):m("",!0),s("div",null,[r[8]||(r[8]=p("DNS —Å—Ç–∞—Ç—É—Å: ")),s("strong",null,c(h.value.dns_status||"pending"),1)])])])):m("",!0)])]))}},Ct=P(Rt,[["__scopeId","data-v-b7d285b0"]]);export{Ct as D};
