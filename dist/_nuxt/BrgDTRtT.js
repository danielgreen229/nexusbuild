import{_ as v,K as k,L as y,J as g,k as p,l as S,c as a,o as c,a as o,t as b}from"./D_JQTfwH.js";const h={class:"confirm-page"},x={key:0,class:"card"},I={key:1,class:"card error"},C={class:"text"},B={key:2,class:"card success"},U={__name:"confirm",setup(q){const u=k(),d=y(),r=g(),l=p(!1),n=p(null);async function _(s,t){l.value=!0,n.value=null;try{const e=s?decodeURIComponent(s):null,i=t?decodeURIComponent(t):null;if(!e||!i)throw new Error("В ссылке отсутствуют обязательные параметры token или uid.");r.token=e,r.uid=i,localStorage.setItem("token",e),localStorage.setItem("uid",i),await r.submit(),await u.replace("/profile")}catch(e){n.value=(e==null?void 0:e.message)||String(e)||"Неизвестная ошибка"}finally{l.value=!1}}function f(){const{token:s,uid:t}=d.query;_(s,t)}function m(){u.push("/login")}return S(()=>{const{token:s,uid:t}=d.query;_(s,t)}),(s,t)=>(c(),a("div",h,[l.value?(c(),a("div",x,t[0]||(t[0]=[o("div",{class:"spinner","aria-hidden":"true"},null,-1),o("div",{class:"text"},"Подтверждаем аккаунт, подождите...",-1)]))):n.value?(c(),a("div",I,[o("p",C,"Ошибка: "+b(n.value),1),o("div",{class:"actions"},[o("button",{onClick:f,class:"btn"},"Повторить"),o("button",{onClick:m,class:"btn secondary"},"Войти")])])):(c(),a("div",B,t[1]||(t[1]=[o("p",{class:"text"},"Успешно! Сейчас вы будете перенаправлены в профиль.",-1)])))]))}},E=v(U,[["__scopeId","data-v-24f91047"]]);export{E as default};
