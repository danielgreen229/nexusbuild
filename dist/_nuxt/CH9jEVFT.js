import{_ as V,c as y,o as d,U as ye,J as E,k as $,E as R,M as j,l as Z,a as t,t as S,f as O,z as ge,i as q,v as M,h as he,A as be,D as we,m as oe,p as ke,d as Y,b as W,y as B,F as X,j as ce,n as G,S as re,X as ue,L as $e,K as Ce,w as xe,q as Q}from"./iHL_0Qvu.js";import Pe from"./DcZLk-9t.js";import Se from"./CpN44h6Y.js";import{u as Ue}from"./B8DVIqKY.js";const Ne={},Ie={class:"block-header__container"};function Ae(I,u){return d(),y("div",Ie,[ye(I.$slots,"default",{},void 0,!0)])}const Te=V(Ne,[["render",Ae],["__scopeId","data-v-1e60b429"]]),Oe={class:"profile-info"},qe={class:"profile-info__header"},De={key:1,class:"profile-info__actions"},Fe=["disabled"],Be={key:0,class:"profile-info__content"},Ve={class:"profile-info__item"},Ee={class:"profile-info__value"},Me={class:"profile-info__item"},Re={class:"profile-info__value"},je={class:"profile-info__item"},Je={class:"profile-info__value"},ze={key:0,class:"profile-info__item"},Ke={class:"profile-info__value"},Le={class:"profile-info__form-group"},He={class:"profile-info__form-group"},Ye={class:"profile-info__form-group"},Qe={class:"profile-info__form-group"},We={__name:"ProfileInfo",setup(I){const u=E(),_=$(!1),l=$(!1);function p(o={}){var v,w,h,A;const i=(o.phone||"").replace(/\D/g,""),n=i.length===11&&i.startsWith("7")?`+7 (${i.slice(1,4)}) ${i.slice(4,7)}-${i.slice(7,9)}-${i.slice(9,11)}`:o.phone||"";return{uid:o.uid||o.id||null,username:o.username||"",name:o.fullname||o.username||"",email:o.email||"",phone:n,telegram:o.tg||o.telegram||"",city:o.city||"",avatar:o.avatar||null,notifications:{email:((v=o.notifications)==null?void 0:v.email)??!0,telegram:((w=o.notifications)==null?void 0:w.telegram)??!0,sms:((h=o.notifications)==null?void 0:h.sms)??!1},security:{twoFactor:((A=o.security)==null?void 0:A.twoFactor)??!1},raw:o}}const m=R(()=>u.user?p(u.user):null),r=$({uid:null,name:"",username:"",email:"",phone:"",telegram:"",city:"",avatar:null,notifications:{email:!0,telegram:!0,sms:!1},security:{twoFactor:!1},raw:null});j(m,o=>{o?_.value||(r.value={...o,notifications:{...o.notifications},security:{...o.security}}):r.value={uid:null,name:"",username:"",email:"",phone:"",telegram:"",city:"",avatar:null,notifications:{email:!0,telegram:!0,sms:!1},security:{twoFactor:!1},raw:null}},{immediate:!0});function c(){m.value&&(r.value={...m.value,notifications:{...m.value.notifications},security:{...m.value.security}}),_.value=!1}Z(async()=>{});async function f(){try{l.value=!0;const o={fullname:r.value.name,email:r.value.email,phone:(r.value.phone||"").replace(/\D/g,""),tg:r.value.telegram,city:r.value.city,notifications:{email:!!r.value.notifications.email,telegram:!!r.value.notifications.telegram,sms:!!r.value.notifications.sms},security:{twoFactor:!!r.value.security.twoFactor}},n=await u.updateProfile(o)||u.user;n&&(u.user=n,r.value={...p(n)},_.value=!1)}catch(o){console.error("Ошибка сохранения профиля:",o)}finally{l.value=!1}}return(o,i)=>{var n,v,w,h,A;return d(),y("div",Oe,[t("div",qe,[i[5]||(i[5]=t("h2",{class:"profile-info__title"},"Личные данные",-1)),_.value?(d(),y("div",De,[t("button",{class:"button button--outline",onClick:c}," Отмена "),t("button",{class:"button button--primary",disabled:l.value,onClick:f},S(l.value?"Сохранение...":"Сохранить"),9,Fe)])):(d(),y("button",{key:0,class:"button button--outline",onClick:i[0]||(i[0]=U=>_.value=!0)}," Редактировать "))]),_.value?(d(),y("form",{key:1,class:"profile-info__form",onSubmit:ge(f,["prevent"])},[t("div",Le,[i[10]||(i[10]=t("label",{class:"profile-info__form-label"},"Имя",-1)),q(t("input",{"onUpdate:modelValue":i[1]||(i[1]=U=>r.value.name=U),type:"text",class:"profile-info__form-input"},null,512),[[M,r.value.name]])]),t("div",He,[i[11]||(i[11]=t("label",{class:"profile-info__form-label"},"Email",-1)),q(t("input",{"onUpdate:modelValue":i[2]||(i[2]=U=>r.value.email=U),type:"email",class:"profile-info__form-input"},null,512),[[M,r.value.email]])]),t("div",Ye,[i[12]||(i[12]=t("label",{class:"profile-info__form-label"},"Телефон",-1)),q(t("input",{"onUpdate:modelValue":i[3]||(i[3]=U=>r.value.phone=U),type:"tel",class:"profile-info__form-input"},null,512),[[M,r.value.phone]])]),t("div",Qe,[i[13]||(i[13]=t("label",{class:"profile-info__form-label"},"Город",-1)),q(t("input",{"onUpdate:modelValue":i[4]||(i[4]=U=>r.value.city=U),type:"text",class:"profile-info__form-input"},null,512),[[M,r.value.city]])])],32)):(d(),y("div",Be,[t("div",Ve,[i[6]||(i[6]=t("span",{class:"profile-info__label"},"Имя:",-1)),t("span",Ee,S((n=m.value)==null?void 0:n.name),1)]),t("div",Me,[i[7]||(i[7]=t("span",{class:"profile-info__label"},"Email:",-1)),t("span",Re,S((v=m.value)==null?void 0:v.email),1)]),t("div",je,[i[8]||(i[8]=t("span",{class:"profile-info__label"},"Телефон:",-1)),t("span",Je,S((w=m.value)==null?void 0:w.phone),1)]),(h=m.value)!=null&&h.city?(d(),y("div",ze,[i[9]||(i[9]=t("span",{class:"profile-info__label"},"Город:",-1)),t("span",Ke,S((A=m.value)==null?void 0:A.city),1)])):O("",!0)]))])}}},Xe=V(We,[["__scopeId","data-v-f151b29d"]]),Ge=he("payment",{state:()=>({loading:!1,error:null}),actions:{async createYooKassaPayment(I){var u,_;if(this.error=null,!I)return this.error="orderId required",{success:!1,error:this.error};this.loading=!0;try{const l=E(),p=(l==null?void 0:l.userId)??(l==null?void 0:l.id)??(l==null?void 0:l.uid)??((u=l==null?void 0:l.profile)==null?void 0:u.id)??null,r=`${be.fullUrl.replace(/\/$/,"")}/payment/orders/${encodeURIComponent(I)}/payment/yookassa`,c={user:{uid:p?String(p):""}},f={Accept:"application/json","Content-Type":"application/json"};l!=null&&l.token&&(f.Authorization=`Bearer ${l.token}`);const o=await fetch(r,{method:"POST",headers:f,body:JSON.stringify(c)}),i=await o.text();let n=null;try{n=i?JSON.parse(i):null}catch{n=i}if(!o.ok){const h=n&&(n.message||n.error||n.description)||i||`HTTP ${o.status}`;return this.error=h,{success:!1,status:o.status,error:h,raw:n}}const v=(n==null?void 0:n.data)??n??{},w=v.confirmationUrl||v.confirmation_url||((_=v.confirmation)==null?void 0:_.confirmation_url)||null;return{success:!0,data:v,confirmationUrl:w,usedEndpoint:r,raw:n}}catch(l){return this.error=(l==null?void 0:l.message)||String(l),{success:!1,error:this.error}}finally{this.loading=!1}}}}),Ze={class:"profile-orders"},et={key:0,class:"profile-orders__loading"},tt={key:1,class:"profile-orders__loading"},st={key:2,class:"profile-orders__empty"},it={key:3,class:"profile-orders__table",role:"table","aria-label":"Список заказов"},lt=["aria-label"],nt=["title"],at={class:"profile-orders__cell profile-orders__cell--template"},ot={class:"profile-orders__template"},rt=["src","alt"],ut={key:1,class:"profile-orders__thumb profile-orders__thumb--placeholder"},ct=["onClick"],ft=["title"],dt=["title"],_t=["title"],pt=["title"],mt={class:"profile-orders__cell profile-orders__cell--actions"},vt=["onClick"],yt={key:0},gt={key:1},ht=["onClick"],bt={class:"profile-orders__cell profile-orders__cell--error",style:{"grid-column":"1 / -1",color:"#b91c1c"}},wt={class:"profile-orders__row profile-orders__row--footer",style:{"border-top":"none"}},kt={class:"profile-orders__cell",style:{"grid-column":"1 / -1",display:"flex","justify-content":"center",padding:"20px"}},$t={key:0,class:"profile-orders__loading"},Ct={key:1,class:"profile-orders__loading"},xt={__name:"ProfileOrders",setup(I){const u=Ge();E();const _=we(),l=$([]),p=$(!1),m=$(!1),r=$(null),c=$(1),f=$(20),o=$(null),i=$(!1),n=$(null);let v=null;const w=$(null),h=$({});function A(e){return re({path:e})}function U(e){if(e)return re({path:`/profile/orders/${e}`})}function ee(e){if(typeof e=="number"&&!Number.isNaN(e))return e;if(typeof e=="string"&&e.trim()!==""){const a=Number(e);return Number.isNaN(a)?null:a}return null}function fe(e){if(!e)return"";const a=e.created_at??e.createdAt??e.date??e.order_date??e.created??e;let s;if(a instanceof Date)s=a;else if(typeof a=="number"){const C=a<1e12&&a<1e10?a*1e3:a;s=new Date(C)}else s=new Date(String(a));return Number.isNaN(s.getTime())?String(a??""):s.toLocaleString("ru-RU",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"})}function de(e){if(typeof window>"u"||!e)return;const a="noopener,noreferrer";let s=e;s=e.replace("https://",""),s="https://"+s,window.open(s,"_blank",a)}function _e(e){var s,C,b,x,k,g,P,T;if(!e)return null;const a=[e.preview,(s=e.template)==null?void 0:s.image,(C=e.template)==null?void 0:C.preview,e.template_image,e.template_preview,e.image,(x=(b=e.raw)==null?void 0:b.template)==null?void 0:x.image,(g=(k=e.raw)==null?void 0:k.template)==null?void 0:g.preview,(P=e.raw)==null?void 0:P.template_image,(T=e.raw)==null?void 0:T.preview];for(const N of a)if(N&&typeof N=="string"&&N.trim()!=="")return N;return null}function te(e){const a=(e==null?void 0:e.status)??(e==null?void 0:e.state)??"";return String(a).toLowerCase().replace(/\s+/g,"_")||"unknown"}function se(e){return e?e==="pending_payment"||e==="pending_yookassa_payment"?"Ожидает оплаты":e==="in_progress"?"В разработке":e==="deploying_domain"?"Подключение домена":e==="succeed"?"Все готово":"В разработке":"—"}function ie(e){return e?e==="pending_payment"||e==="pending_yookassa_payment"?"Ожидает оплаты":e==="in_progress"?"В разработке":e==="completed"?"Оплачен":e==="cancelled"?"Отменен":"В разработке":"—"}function le(e){const a=ee(e.price??e.amount??e.total),s=e.currency??e.currency_code??"RUB";if(a!=null)try{return new Intl.NumberFormat("ru-RU",{style:"currency",currency:s}).format(a)}catch{return String(a)}return e.price??"—"}function ne(e){var b,x,k;if(!e||typeof e!="object")return{id:`order-invalid-${Date.now()}-${Math.floor(Math.random()*1e3)}`,date:"",template:"—",status:"—",statusCode:"unknown",price:"—",preview:null,raw:{}};const a=e.id??e.order_id??e._id??((b=e.raw)==null?void 0:b.id)??((x=e.domain)!=null&&x.fqdn?`order-${String(e.domain.fqdn)}`:`order-${String(e.template_id??e.templateId??Date.now())}`),s=String(a),C=ee(e.price??e.amount??e.total);return{id:s,date:fe(e),template:((k=e.template)==null?void 0:k.title)??e.template_name??e.template??"—",status:e.status??e.state??"—",statusCode:te(e),price:C??e.price??e.amount??"—",preview:_e(e),raw:e}}async function J(e=1,a=!1){var s,C,b,x,k;if(!(e===1&&p.value)&&!(e>1&&(m.value||p.value))&&!(i.value&&e>1)){e===1?(p.value=!0,r.value=null):m.value=!0;try{const g=await _.fetchUserOrders({page:e,perPage:f.value});if(!g||!g.success){r.value=(g==null?void 0:g.message)??"Ошибка получения заказов",_.orders&&Array.isArray(_.orders)&&_.orders.length&&!a&&(l.value=_.orders.filter(Boolean).map(ne));return}let P=((s=g.data)==null?void 0:s.rows)??g.data??_.orders??[];Array.isArray(P)||(P=[]),P=P.filter(L=>L!=null);const T=((C=g.data)==null?void 0:C.page)??e,N=((b=g.data)==null?void 0:b.perPage)??f.value,D=((x=g.data)==null?void 0:x.totalCount)??((k=g.data)==null?void 0:k.total)??null;c.value=T,f.value=N,o.value=D!=null?Number(D):null;const F=P.map(ne).filter(Boolean);if(a){const L=new Set(l.value.map(H=>String(H.id))),ve=F.filter(H=>!L.has(String(H.id)));l.value=l.value.concat(ve)}else l.value=F;!P||P.length===0||P.length<f.value||o.value!=null&&l.value.length>=o.value?(i.value=!0,K()):i.value=!1}catch(g){console.error("loadOrdersPage error",g),r.value=(g==null?void 0:g.message)??"Сетевая ошибка"}finally{p.value=!1,m.value=!1}}}async function pe(){if(i.value||m.value||p.value)return;const e=(c.value||1)+1;await J(e,!0)}function z(){typeof window>"u"||!("IntersectionObserver"in window)||(v&&v.disconnect(),v=new IntersectionObserver(async e=>{for(const a of e)a.isIntersecting&&!p.value&&!m.value&&!i.value&&await pe()},{root:null,rootMargin:"200px",threshold:.1}),n.value&&v.observe(n.value))}function K(){v&&(v.disconnect(),v=null)}Z(async()=>{await J(1,!1),await oe(),z()}),j(n,e=>{e?z():K()}),ke(()=>K());async function ae(){i.value=!1,c.value=1,o.value=null,await J(1,!1),await oe(),z()}async function me(e){var a,s,C;if(!(!e||!e.id)&&!w.value){if(e.status==="completed"||e.status==="in_progress")return U(e.id);w.value=e.id,h.value={...h.value,[e.id]:null};try{const b=await u.createYooKassaPayment(e.id);if(!b.success){h.value={...h.value,[e.id]:b.error||"Ошибка создания платежа"};return}const x=b.confirmationUrl||((a=b.data)==null?void 0:a.confirmationUrl)||((s=b.data)==null?void 0:s.confirmation_url)||null,k=l.value.findIndex(g=>String(g.id)===String(e.id));k!==-1&&(l.value[k].status=((C=b.data)==null?void 0:C.status)??"pending_yookassa_payment",l.value[k].statusCode=te({status:l.value[k].status})),x?(window.open(x,"_blank"),setTimeout(()=>{ae().catch(()=>{})},1200)):h.value={...h.value,[e.id]:"Ссылка на оплату не получена"}}catch(b){h.value={...h.value,[e.id]:(b==null?void 0:b.message)||"Ошибка"}}finally{w.value=null}}}return(e,a)=>(d(),y("div",Ze,[a[5]||(a[5]=t("h2",{class:"profile-orders__title"},"Мои заказы",-1)),p.value?(d(),y("div",et,"Загрузка заказов...")):r.value?(d(),y("div",tt,[Y(" Ошибка: "+S(r.value)+" ",1),t("div",{style:{"margin-top":"12px"}},[t("button",{class:"primary__button",onClick:ae},"Повторить")])])):l.value.length===0?(d(),y("div",st,[a[3]||(a[3]=Y(" У вас пока нет заказов ")),t("button",{class:"primary__button",onClick:a[0]||(a[0]=s=>A("/templates"))},[a[2]||(a[2]=Y(" Купить сайт ")),W(B(Pe),{class:"next-cirlce__svg"})])])):(d(),y("div",it,[a[4]||(a[4]=t("div",{class:"profile-orders__row profile-orders__row--header",role:"row"},[t("div",{class:"profile-orders__cell"},"Дата"),t("div",{class:"profile-orders__cell"},"Шаблон"),t("div",{class:"profile-orders__cell"},"Статус разработки"),t("div",{class:"profile-orders__cell"},"Статус"),t("div",{class:"profile-orders__cell"},"Сумма"),t("div",{class:"profile-orders__cell"},"Действия")],-1)),(d(!0),y(X,null,ce(l.value,(s,C)=>{var b,x,k,g,P,T;return d(),y(X,{key:s.id??`order-${C}`},[s?(d(),y("div",{key:0,class:"profile-orders__row profile-orders__row--data",role:"row","aria-label":`Заказ ${s.id}`},[t("div",{class:"profile-orders__cell profile-orders__cell--date",title:s.date},S(s.date),9,nt),t("div",at,[t("div",ot,[(x=(b=s.raw)==null?void 0:b.template)!=null&&x.preview?(d(),y("img",{key:0,src:s.raw.template.preview,class:"profile-orders__thumb",onError:a[1]||(a[1]=N=>{N.target.style.display="none"}),alt:s.template||"preview"},null,40,rt)):(d(),y("div",ut)),t("div",{class:"profile-orders__template-info",onClick:N=>{var D,F;return de((F=(D=s.raw)==null?void 0:D.domain)==null?void 0:F.fqdn)}},[t("div",{class:"profile-orders__template-title",title:((g=(k=s.raw)==null?void 0:k.domain)==null?void 0:g.fqdn)??s.template},S(((T=(P=s.raw)==null?void 0:P.domain)==null?void 0:T.fqdn)??s.template),9,ft),W(B(Se),{class:"open__svg"})],8,ct)])]),t("div",{class:"profile-orders__cell profile-orders__cell--status",title:se(s.raw.deploy_status)},[t("span",{class:G(["profile-orders__status",`profile-orders__status--${s.statusCode}`])},S(se(s.raw.deploy_status)),3)],8,dt),t("div",{class:"profile-orders__cell profile-orders__cell--status",title:ie(s.status)},[t("span",{class:G(["profile-orders__status",`profile-orders__status--${s.statusCode}`])},S(ie(s.status)),3)],8,_t),t("div",{class:"profile-orders__cell profile-orders__cell--price",title:le(s)},S(le(s)),9,pt),t("div",mt,[w.value===s.id||s.status==="completed"||s.status==="in_progress"?O("",!0):(d(),y("button",{key:0,class:"profile-orders__pay",onClick:N=>me(s)},[w.value===s.id?(d(),y("span",yt,"Переход к оплате...")):(d(),y("span",gt,"Оплатить"))],8,vt)),t("button",{class:"profile-orders__action",onClick:N=>U(s.id)},"Подробнее",8,ht)])],8,lt)):O("",!0),s&&h.value[s.id]?(d(),y("div",{key:`err-${s.id}`,class:"profile-orders__row profile-orders__row--error",style:{background:"#fff7f7"}},[t("div",bt," Ошибка оплаты ("+S(s.id)+"): "+S(h.value[s.id]),1)])):O("",!0)],64)}),128)),t("div",wt,[t("div",kt,[m.value?(d(),y("div",$t,"Загрузка...")):i.value?(d(),y("div",Ct,"Больше заказов нет")):O("",!0)])]),t("div",{ref_key:"sentinel",ref:n,style:{height:"1px",width:"100%"}},null,512)]))]))}},Pt=V(xt,[["__scopeId","data-v-f8dbe4b4"]]),St={class:"profile-settings"},Ut={class:"profile-settings__section"},Nt={class:"profile-settings__option"},It=["title"],At=["disabled"],Tt={class:"profile-settings__option"},Ot={style:{display:"flex","align-items":"center",gap:"12px"}},qt=["disabled"],Dt=["title"],Ft=["disabled"],Bt={__name:"ProfileSettings",setup(I){const u=E(),_=R(()=>!!u.user),l=R({get(){return u.user?Number(u.user.email_access)===1:!1},set(r){if(!u.user)return;const c=r?1:0;u.user.email_access=c,u.isAuthenticated&&u.updateProfile({email_access:c}).catch(async()=>{try{await u.fetchCurrentUser()}catch{}})}}),p=R({get(){return u.user?Number(u.user.tg_access)===1:!1},set(r){if(!u.user)return;const c=r?1:0;u.user.tg_access=c,u.isAuthenticated&&u.updateProfile({tg_access:c}).catch(async()=>{try{await u.fetchCurrentUser()}catch{}})}});function m(){if(!u.user||!u.user.uid)return;const r={uid:u.user.uid},f=`https://t.me/sitebypro_official_bot?start=${btoa(JSON.stringify(r))}`;window.open(f,"_blank")}return(r,c)=>(d(),y("div",St,[c[7]||(c[7]=t("h2",{class:"profile-settings__title"},"Настройки",-1)),t("div",Ut,[c[6]||(c[6]=t("h3",{class:"profile-settings__subtitle"},"Уведомления",-1)),t("div",Nt,[c[3]||(c[3]=t("div",{class:"profile-settings__option-info"},[t("div",{class:"profile-settings__option-title"},"Email уведомления"),t("div",{class:"profile-settings__option-desc"}," Получать новости и обновления на почту с ваших сайтов ")],-1)),t("label",{class:"profile-settings__switch",title:_.value?"":"Профиль не загружен"},[q(t("input",{type:"checkbox","onUpdate:modelValue":c[0]||(c[0]=f=>l.value=f),class:"profile-settings__switch-input",disabled:!_.value||B(u).loading},null,8,At),[[ue,l.value]]),c[2]||(c[2]=t("span",{class:"profile-settings__switch-slider"},null,-1))],8,It)]),t("div",Tt,[c[5]||(c[5]=t("div",{class:"profile-settings__option-info"},[t("div",{class:"profile-settings__option-title"},"Telegram уведомления"),t("div",{class:"profile-settings__option-desc"}," Получать важные уведомления в Telegram с ваших сайтов ")],-1)),t("div",Ot,[t("button",{class:"profile-settings__connect-btn",onClick:m,disabled:!_.value||B(u).loading,type:"button"}," Привязать Telegram ",8,qt),t("label",{class:"profile-settings__switch",title:_.value?"":"Профиль не загружен"},[q(t("input",{type:"checkbox","onUpdate:modelValue":c[1]||(c[1]=f=>p.value=f),class:"profile-settings__switch-input",disabled:!_.value||B(u).loading},null,8,Ft),[[ue,p.value]]),c[4]||(c[4]=t("span",{class:"profile-settings__switch-slider"},null,-1))],8,Dt)])])])]))}},Vt=V(Bt,[["__scopeId","data-v-dea3dfd6"]]),Et={key:0,class:"profile"},Mt={class:"profile__tabs"},Rt=["onClick","aria-pressed"],jt={class:"profile__content"},Jt={__name:"index",setup(I){Ue({title:"Профиль",description:"Персональная страница профиля SiteByPro — контакты, портфолио и услуги в одном месте. Быстро связаться и узнать о проектах.",image:"https://sitebypro-server.ru/static/files/store/preview.png",url:"https://sitebypro.com/profile"});const u=[{id:"orders",title:"Мои заказы"},{id:"info",title:"Профиль"},{id:"settings",title:"Настройки"}],_=u.map(n=>n.id),l=$e(),p=Ce(),m=E(),r=n=>{var h;const v=(h=n==null?void 0:n.query)==null?void 0:h.tab;return Array.isArray(v)?v[0]:v},c=r(l),f=$(_.includes(c)?c:"info"),o=$(!1);function i(n){_.includes(n)&&(f.value=n,p.replace({query:{...l.query,tab:n}}).catch(()=>{}))}return j(()=>l.fullPath,()=>{const n=r(l);n&&_.includes(n)&&n!==f.value?f.value=n:!n&&f.value!=="info"&&(f.value="info")}),j(()=>m.isAuthenticated,n=>{n||p.currentRoute.value.path!=="/"&&p.replace({path:"/"}).catch(()=>{})}),Z(()=>{const n=r(l);if((!n||!_.includes(n))&&p.replace({query:{...l.query,tab:f.value}}).catch(()=>{}),m.initFromStorage(),!m.isAuthenticated){o.value=!1,p.currentRoute.value.path!=="/"&&p.replace({path:"/"}).catch(()=>{});return}(async()=>{try{if(await m.fetchCurrentUser(),!m.isAuthenticated){p.currentRoute.value.path!=="/"&&p.replace({path:"/"}).catch(()=>{}),o.value=!1;return}o.value=!0}catch{p.currentRoute.value.path!=="/"&&p.replace({path:"/"}).catch(()=>{}),o.value=!1}})()}),(n,v)=>o.value?(d(),y("div",Et,[W(Te,null,{default:xe(()=>v[0]||(v[0]=[t("h1",{class:"profile__title"},"Личный кабинет",-1),t("p",{class:"profile__subtitle"},"Управляйте своими заказами и настройками",-1)])),_:1,__:[0]}),t("div",Mt,[(d(),y(X,null,ce(u,w=>t("button",{key:w.id,class:G(["profile__tab",{"profile__tab--active":f.value===w.id}]),onClick:h=>i(w.id),"aria-pressed":f.value===w.id},S(w.title),11,Rt)),64))]),t("div",jt,[f.value==="info"?(d(),Q(Xe,{key:0})):f.value==="orders"?(d(),Q(Pt,{key:1})):f.value==="settings"?(d(),Q(Vt,{key:2})):O("",!0)])])):O("",!0)}},Yt=V(Jt,[["__scopeId","data-v-5f91a8c2"]]);export{Yt as default};
