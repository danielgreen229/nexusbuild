import m from"./CmCNxLfX.js";import{_ as p,I as _,c as r,o as i,a as o,b as f,f as d,t as n,J as a}from"./D_JQTfwH.js";const h={components:{BigEmail:m},data(){return{loading:!1,successMessage:"",errorMessage:""}},computed:{hasUid(){return!!(a().uid||localStorage.getItem("uid"))}},mounted(){const s=a();typeof s.initFromStorage=="function"&&s.initFromStorage()},methods:{async resend(){this.loading=!0,this.successMessage="",this.errorMessage="";const s=a();try{const e=s.uid||localStorage.getItem("uid");if(!e){this.errorMessage="Повторная отправка невозможна. Обратитесь в поддержку.";return}if(typeof s.sendTokenEmail=="function")try{await s.sendTokenEmail({uid:e})}catch(l){throw console.log(l),new Error("Ошибка отправки письма")}else throw new Error("Действие для повторной отправки не найдено в сторе.");this.successMessage="Письмо отправлено повторно. Проверьте почту (включая папку Спам)."}catch(e){e&&e.response&&e.response.data&&e.response.data.message?this.errorMessage=e.response.data.message:e&&e.message?this.errorMessage=e.message:this.errorMessage="Ошибка при отправке письма"}finally{this.loading=!1}}}},M={class:"submit__container"},b={class:"big-email__container"},y={class:"resend-container","aria-live":"polite"},E={class:"buttons"},k=["disabled"],v={key:0,class:"success"},B={key:1,class:"error"};function S(s,e,l,w,t,c){const u=_("BigEmail");return i(),r("div",M,[e[2]||(e[2]=o("p",null,"На вашу почту отправлено письмо.",-1)),e[3]||(e[3]=o("p",null,"Пожалуйста, перейдите по ссылке в письме, чтобы подтвердить email.",-1)),o("div",b,[f(u,{class:"big-email"})]),o("div",y,[e[1]||(e[1]=o("p",{class:"hint"},"Если письмо не пришло — вы можете отправить его повторно.",-1)),o("div",E,[o("button",{class:"btn resend",disabled:t.loading,onClick:e[0]||(e[0]=(...g)=>c.resend&&c.resend(...g)),title:"Переотправить письмо используя uid"},n(t.loading?"Отправка...":"Отправить письмо заново"),9,k)]),t.successMessage?(i(),r("p",v,n(t.successMessage),1)):d("",!0),t.errorMessage?(i(),r("p",B,n(t.errorMessage),1)):d("",!0)])])}const C=p(h,[["render",S],["__scopeId","data-v-52d2315e"]]);export{C as default};
