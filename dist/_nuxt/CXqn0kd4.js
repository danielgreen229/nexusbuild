import{_ as v,q as k,s as y,p as g,i as _,j as S,c as a,o as c,a as o,t as b}from"./xo8e5jVH.js";const h={class:"confirm-page"},x={key:0,class:"card"},I={key:1,class:"card error"},C={class:"text"},q={key:2,class:"card success"},B={__name:"confirm",setup(U){const u=k(),d=y(),r=g(),l=_(!1),n=_(null);async function p(e,t){l.value=!0,n.value=null;try{const s=e?decodeURIComponent(e):null,i=t?decodeURIComponent(t):null;if(!s||!i)throw new Error("В ссылке отсутствуют обязательные параметры token или uid.");r.token=s,r.uid=i,localStorage.setItem("token",s),localStorage.setItem("uid",i),await r.submit(),await u.replace("/profile")}catch(s){n.value=(s==null?void 0:s.message)||String(s)||"Неизвестная ошибка"}finally{l.value=!1}}function f(){const{token:e,uid:t}=d.query;p(e,t)}function m(){u.push("/login")}return S(()=>{const{token:e,uid:t}=d.query;p(e,t)}),(e,t)=>(c(),a("div",h,[l.value?(c(),a("div",x,t[0]||(t[0]=[o("div",{class:"spinner","aria-hidden":"true"},null,-1),o("div",{class:"text"},"Подтверждаем аккаунт, подождите...",-1)]))):n.value?(c(),a("div",I,[o("p",C,"Ошибка: "+b(n.value),1),o("div",{class:"actions"},[o("button",{onClick:f,class:"btn"},"Повторить"),o("button",{onClick:m,class:"btn secondary"},"Войти")])])):(c(),a("div",q,t[1]||(t[1]=[o("p",{class:"text"},"Успешно! Сейчас вы будете перенаправлены в профиль.",-1)])))]))}},E=v(B,[["__scopeId","data-v-24f91047"]]);export{E as default};
