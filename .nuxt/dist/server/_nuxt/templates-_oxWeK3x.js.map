{"version":3,"file":"templates-_oxWeK3x.js","sources":["../../../../components/portfolio/PortfolioHero.vue","../../../../components/portfolio/PortfolioFilters.vue","../../../../components/portfolio/TemplateCard.vue","../../../../components/portfolio/PortfolioGrid.vue","../../../../components/portfolio/PortfolioCTA.vue","../../../../pages/templates.vue"],"sourcesContent":["<script setup>\nimport { ref, watch, onMounted } from 'vue'\nimport { useTemplateStore } from '~/stores/template' // путь к стоору — скорректируйте если у вас другой\nconst templateStore = useTemplateStore()\n\nconst title = \"Выберите подходящий шаблон\"\nconst subtitle = \"\"\n\nconst search = ref('')\nconst debouncedTimer = ref(null)\nconst debounceMs = 300\n\n// если нужно — при монтировании загрузим первые шаблоны\nonMounted(async () => {\n  try {\n    // initial load (optional) — можно убрать если не нужен\n    await templateStore.listTemplates({ page: 1, perPage: 12, filters: {} })\n  } catch (e) {\n    /* ignore */\n  }\n})\n\n// Ввод с дебаунсом: при остановке ввода выполняем поиск (заменяет автоподгрузку)\nwatch(search, (val) => {\n  if (debouncedTimer.value) clearTimeout(debouncedTimer.value)\n  debouncedTimer.value = setTimeout(async () => {\n    // если пустая строка — можно сбросить фильтр или загрузить дефолт\n    if (!val || String(val).trim() === '') {\n      // сброс — загрузим обычный список первой страницы\n      await templateStore.listTemplates({ page: 1, perPage: 12, filters: {} })\n      return\n    }\n\n    try {\n      await templateStore.listTemplates({\n        page: 1,\n        perPage: 12,\n        filters: { search: val }\n      })\n    } catch (e) {\n      // error хранится в store\n    }\n  }, debounceMs)\n})\n\n// Нажатие Enter в инпуте или клик на кнопку — мгновенный поиск\nasync function submitSearch() {\n  if (debouncedTimer.value) {\n    clearTimeout(debouncedTimer.value)\n    debouncedTimer.value = null\n  }\n  try {\n    await templateStore.listTemplates({\n      page: 1,\n      perPage: 12,\n      filters: { search: search.value }\n    })\n  } catch (e) {\n    // error handled by store\n  }\n}\n\nfunction clearSearch() {\n  search.value = ''\n  // загрузим дефолтный список\n  templateStore.listTemplates({ page: 1, perPage: 12, filters: {} }).catch(()=>{})\n}\n</script>\n\n<template>\n  <section class=\"portfolio-hero\">\n    <div class=\"portfolio-hero__container container\">\n      <div class=\"portfolio-hero__content\">\n        <h1 class=\"portfolio-hero__title\">{{ title }}</h1>\n        <p class=\"portfolio-hero__subtitle\">{{ subtitle }}</p>\n\n        <form class=\"portfolio-hero__search\" @submit.prevent=\"submitSearch\" aria-label=\"Поиск шаблонов\">\n          <div class=\"search-wrap\">\n            <input\n              v-model=\"search\"\n              @keyup.enter.prevent=\"submitSearch\"\n              type=\"search\"\n              placeholder=\"Найти шаблон...\"\n              class=\"portfolio-hero__input\"\n              aria-label=\"Поиск шаблонов\"\n            />\n            <button type=\"submit\" class=\"btn-search\" :disabled=\"templateStore.loading\">\n              <span v-if=\"templateStore.loading\">Поиск...</span>\n              <span v-else>Найти</span>\n            </button>\n          </div>\n        </form>\n\n        <div class=\"portfolio-hero__meta\" v-if=\"templateStore.templates && templateStore.templates.length >= 0\">\n          <span class=\"meta-count\">\n            Найдено: <strong>{{ templateStore.total ?? templateStore.templates.length }}</strong>\n          </span>\n          <span class=\"meta-loading\" v-if=\"templateStore.loading\"> · загружается…</span>\n          <span class=\"meta-error\" v-if=\"templateStore.error\"> · Ошибка: {{ templateStore.error }}</span>\n        </div>\n      </div>\n    </div>\n  </section>\n</template>\n\n<style scoped>\n.portfolio-hero {\n  padding: 80px 0;\n  background: linear-gradient(135deg, #2563eb 0%, #7da5e6 68%, #2563eb 85%);\n  text-align: center;\n  color: white;\n}\n\n.portfolio-hero__title {\n  font-size: 2.8rem;\n  margin-bottom: 8px;\n  font-weight: 700;\n}\n\n.portfolio-hero__subtitle {\n  font-size: 1.1rem;\n  opacity: 0.95;\n  max-width: 700px;\n  margin: 0 auto 20px;\n}\n\n.portfolio-hero__search {\n  margin-top: 18px;\n  display: flex;\n  justify-content: center;\n}\n\n.search-wrap {\n  display: inline-flex;\n  align-items: center;\n  gap: 8px;\n  background: rgba(255,255,255,0.08);\n  padding: 8px;\n  border-radius: 10px;\n  backdrop-filter: blur(6px);\n}\n\n.portfolio-hero__input {\n  min-width: 320px;\n  max-width: 720px;\n  padding: 10px 14px;\n  border: none;\n  border-radius: 8px;\n  background: rgba(255,255,255,0.12);\n  color: white;\n  outline: none;\n  font-size: 1rem;\n}\n\n.portfolio-hero__input::placeholder {\n  color: rgba(255,255,255,0.75);\n}\n\n.btn-search {\n  padding: 8px 14px;\n  border-radius: 8px;\n  border: none;\n  background: rgba(0,0,0,0.18);\n  color: white;\n  cursor: pointer;\n  font-weight: 600;\n}\n\n.btn-search[disabled] {\n  opacity: 0.6;\n  cursor: default;\n}\n\n.btn-clear {\n  padding: 6px 8px;\n  border-radius: 6px;\n  border: none;\n  background: transparent;\n  color: white;\n  cursor: pointer;\n  font-size: 0.9rem;\n}\n\n.portfolio-hero__meta {\n  margin-top: 12px;\n  font-size: 0.95rem;\n  opacity: 0.92;\n}\n\n.meta-count strong {\n  color: #fff;\n}\n\n/* ==========================\n   Стили для белого крестика\n   (WebKit: Chrome, Safari)\n   ========================== */\n\n/* Прямой селектор — для input внутри этого компонента */\n.portfolio-hero__input::-webkit-search-cancel-button {\n  -webkit-appearance: none;\n  appearance: none;\n  width: 18px;\n  height: 18px;\n  cursor: pointer;\n  border: none;\n  padding: 0;\n  background-color: transparent;\n\n  /* SVG data-uri: stroke white (%23 == #) */\n  background-image: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath stroke='%23fff' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' d='M6 6l12 12M18 6L6 18'/%3E%3C/svg%3E\");\n  background-repeat: no-repeat;\n  background-position: center;\n  background-size: 14px 14px;\n  opacity: 1;\n}\n\n/* Для случаев scoped + вложенные компоненты (если input находится внутри дочерних) */\n::v-deep .portfolio-hero__input::-webkit-search-cancel-button {\n  -webkit-appearance: none;\n  appearance: none;\n  width: 18px;\n  height: 18px;\n  cursor: pointer;\n  border: none;\n  padding: 0;\n  background-color: transparent;\n  background-image: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath stroke='%23fff' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' d='M6 6l12 12M18 6L6 18'/%3E%3C/svg%3E\");\n  background-repeat: no-repeat;\n  background-position: center;\n  background-size: 14px 14px;\n  opacity: 1;\n}\n\n/* hover-эффект (опционально) */\n.portfolio-hero__input::-webkit-search-cancel-button:hover,\n::v-deep .portfolio-hero__input::-webkit-search-cancel-button:hover {\n  transform: scale(1.05);\n}\n\n/* Убрать крестик в Edge/IE (если хотите использовать свой) */\n.portfolio-hero__input::-ms-clear {\n  display: none;\n}\n::v-deep .portfolio-hero__input::-ms-clear {\n  display: none;\n}\n\n/* Responsive */\n@media (max-width: 768px) {\n  .portfolio-hero {\n    padding: 60px 0;\n    background: linear-gradient(135deg, #1d4ed8 0%, #2563eb 100%);\n  }\n\n  .portfolio-hero__title {\n    font-size: 2.2rem;\n  }\n\n  .portfolio-hero__subtitle {\n    font-size: 1.0rem;\n  }\n\n  .portfolio-hero__input {\n    min-width: 220px;\n  }\n}\n</style>","<script setup>\n\ndefineProps({\n  activeFilter: {\n    type: String,\n    required: true\n  }\n})\n\nconst emit = defineEmits(['update:activeFilter'])\n\nconst filters = ref([\n  { id: 'all', name: 'Все шаблоны' },\n])\n\nconst setFilter = (filterId) => {\n  emit('update:activeFilter', filterId)\n}\n</script>\n\n<template>\n  <section class=\"portfolio-filters\">\n    <div class=\"portfolio-filters__container container\">\n      <div class=\"portfolio-filters__wrapper\">\n        <button \n          v-for=\"filter in filters\" \n          :key=\"filter.id\"\n          :class=\"['portfolio-filters__button', { 'portfolio-filters__button--active': activeFilter === filter.id }]\"\n          @click=\"setFilter(filter.id)\"\n        >\n          {{ filter.name }}\n        </button>\n      </div>\n    </div>\n  </section>\n</template>\n\n<style scoped>\n.portfolio-filters {\n  padding: 25px 0;\n  background: white;\n  position: sticky;\n  top: 114px;\n  z-index: 90;\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);\n}\n\n.portfolio-filters__wrapper {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 10px;\n  justify-content: left;\n}\n\n.portfolio-filters__button {\n  padding: 10px 20px;\n  background: #f1f5f9;\n  border: none;\n  border-radius: 8px;\n  font-size: 1rem;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n\n.portfolio-filters__button:hover {\n  background: #e2e8f0;\n}\n\n.portfolio-filters__button--active {\n  background: #2563eb;\n  color: white;\n}\n\n@media (max-width: 768px) {\n  .portfolio-filters {\n    top: 69px;\n  }\n  \n  .portfolio-filters__wrapper {\n    justify-content: flex-start;\n    overflow-x: auto;\n    padding-bottom: 10px;\n  }\n}\n</style>","<script setup>\nimport OpenNext from '~/assets/icons/open-next.svg'\nimport { ref, computed, onMounted, onBeforeUnmount, nextTick } from 'vue'\nimport Button from '@/components/ui/Button.vue'\nimport { useUserStore } from '~/stores/user'\n\n// Включите для подробного локального дебага\nconst DEBUG = false\n\nconst props = defineProps({\n  template: { type: Object, required: true }\n})\nconst emit = defineEmits(['view'])\nconst userStore = useUserStore()\nconst loading = ref(false)\n\n// helpers\nconst round2 = (v) => { const n = Number(v) || 0; return Math.round((n + Number.EPSILON) * 100) / 100 }\nconst fmt = (v) => { const n = Number(v) || 0; return n.toLocaleString('ru-RU', { minimumFractionDigits: n % 1 === 0 ? 0 : 2, maximumFractionDigits: 2 }) }\n\n// NEW: inline_build detection\nconst inlineBuild = computed(() => {\n  const t = props.template?.inline_build ?? props.template?.inlineBuild\n  if (typeof t !== 'undefined') return Boolean(t)\n  if (typeof window !== 'undefined') return Boolean(window?.inline_build)\n  return false\n})\n\n// price & discount (как было)\nconst price = computed(() => round2(props.template.price ?? props.template.price_cents ?? 0))\nconst discountPercent = computed(() => {\n  const p = props.template.discount_percent ?? props.template.discountPercent ?? props.template.discount ?? 0\n  return Number.isFinite(Number(p)) ? round2(Number(p)) : 0\n})\nconst discountAmountFromField = computed(() => round2(props.template.discount_amount ?? props.template.discountAmount ?? props.template.discount_amount_cents ?? 0))\nconst computedDiscountAmount = computed(() => {\n  if (discountAmountFromField.value > 0) return round2(discountAmountFromField.value)\n  if (discountPercent.value > 0) return round2(price.value * discountPercent.value / 100)\n  return 0\n})\nconst finalPrice = computed(() => { const p = price.value - computedDiscountAmount.value; return round2(p > 0 ? p : 0) })\n\n// purchase handlers (как было)\nconst buyTemplate = async (templateId) => {\n  await navigateTo({ path: '/buy-template/' + templateId })\n}\n\nconst viewTemplate = (url, event) => { \n  event?.stopPropagation?.(); \n  emit('view', props.template) \n  if (!url) return;\n  window.open(url, '_blank', 'noopener,noreferrer');\n}\n\n/* -------------------------\n   Анимация через object-position\n   старт: 0% 0% -> 0% 100% -> возврат\n   fallback: transform translateY для браузеров, где нужно\n   Исправления для плавности и корректного поведения при быстром hover/unhover:\n   - не менять transition каждый кадр\n   - при повторном hover во время возврата — отменять возврат и начинать с 0%\n   ------------------------- */\nconst imageRef = ref(null)\nconst imageWrapperRef = ref(null)\n\nlet rafId = null\nlet lastTs = 0\nlet translateY = 0      // px scrolled\nlet direction = 1       // 1 вниз, -1 вверх\nlet maxScroll = 0       // px\nlet animating = false\nlet pausedDueToInteractive = false\nlet returning = false   // true когда выполняется плавный возврат к 0%\n\nconst lastMouse = { x: null, y: null }\nconst SPEED_PX_PER_SEC = 40\nconst HORIZONTAL_POS = '0%'\n\nconst log = (...args) => { if (DEBUG) console.log('[tmpl-scroll]', ...args) }\n\n// Рассчитываем реальную высоту отрисовки картинки при object-fit: cover\nconst updateBounds = () => {\n  const img = imageRef.value; const wrapper = imageWrapperRef.value\n  if (!img || !wrapper) { maxScroll = 0; return }\n  const nw = img.naturalWidth || img.width\n  const nh = img.naturalHeight || img.height\n  const ww = wrapper.clientWidth\n  const wh = wrapper.clientHeight\n  if (!nw || !nh || !ww || !wh) { maxScroll = 0; return }\n  const scale = Math.max(ww / nw, wh / nh)\n  const displayedH = nh * scale\n  maxScroll = Math.max(0, Math.round(displayedH - wh))\n  log('updateBounds', { nw, nh, ww, wh, scale, displayedH, maxScroll })\n  if (maxScroll <= 0) {\n    translateY = 0\n    // гарантируем стартовую позицию\n    img.style.objectPosition = `${HORIZONTAL_POS} 0%`\n    img.style.transform = ''\n  }\n}\n\n// applyPosition: теперь НЕ трогаем transition — только позицию.\n// это улучшает производительность и убирает \"рывки\" при быстром hover/unhover.\nconst applyPosition = (px) => {\n  const img = imageRef.value\n  if (!img) return\n  if (maxScroll > 0) {\n    const pct = Math.min(100, Math.max(0, (px / maxScroll) * 100))\n    // Не устанавливаем transition здесь — он нужен только для RETURN.\n    img.style.objectPosition = `${HORIZONTAL_POS} ${pct}%`\n    // fallback (закомментирован): при проблемах с object-position можно раскомментировать.\n    // img.style.transform = `translateY(${-Math.round(px)}px)`\n  } else {\n    img.style.objectPosition = `${HORIZONTAL_POS} 0%`\n    img.style.transform = ''\n  }\n}\n\nconst step = (ts) => {\n  if (!animating) return\n  if (pausedDueToInteractive) { rafId = requestAnimationFrame(step); return }\n  if (!lastTs) lastTs = ts\n  const dt = ts - lastTs; lastTs = ts\n  const delta = (SPEED_PX_PER_SEC * dt / 1000) * direction\n  let newY = translateY + delta\n  if (newY >= maxScroll) { newY = maxScroll; direction = -1 }\n  else if (newY <= 0) { newY = 0; direction = 1 }\n  translateY = newY\n  applyPosition(translateY)\n  rafId = requestAnimationFrame(step)\n}\n\nconst isPointerOverInteractive = () => {\n  try {\n    const wrapper = imageWrapperRef.value\n    if (!wrapper) return false\n    if (lastMouse.x == null) return false\n    const el = document.elementFromPoint(lastMouse.x, lastMouse.y)\n    if (!el) return false\n    const interactive = el.closest && el.closest('button, a, input, textarea, [role=\"button\"], label')\n    if (!interactive) return false\n    // игнорируем нашу оверлей-кнопку\n    if (interactive.classList && interactive.classList.contains('template-card__view-button')) return false\n    return true\n  } catch (e) { return false }\n}\n\nconst onPointerMove = (e) => {\n  lastMouse.x = e.clientX; lastMouse.y = e.clientY\n  const overInteractive = isPointerOverInteractive()\n  if (overInteractive && animating && !pausedDueToInteractive) { pausedDueToInteractive = true }\n  else if (!overInteractive && pausedDueToInteractive) { pausedDueToInteractive = false; lastTs = 0 }\n}\n\nconst startAnimation = async (event) => {\n  // записываем координаты\n  if (event && event.clientX != null) { lastMouse.x = event.clientX; lastMouse.y = event.clientY }\n  await nextTick()\n  updateBounds()\n  const img = imageRef.value\n  if (maxScroll <= 0) {\n    if (img && !img.complete) {\n      const onImgLoad = () => {\n        img.removeEventListener('load', onImgLoad)\n        updateBounds()\n        if (maxScroll > 0 && imageWrapperRef.value && imageWrapperRef.value.matches(':hover')) {\n          requestAnimationFrame(() => startAnimation())\n        }\n      }\n      img.addEventListener('load', onImgLoad, { once: true })\n    }\n    return\n  }\n\n  // Отменяем любой текущий плавный возврат (если он есть)\n  if (img) {\n    if (img._tmpl_return_end) {\n      img.removeEventListener('transitionend', img._tmpl_return_end)\n      img._tmpl_return_end = null\n    }\n    // отключаем transition, чтобы убрать CSS-перемещения\n    img.style.transition = 'none'\n  }\n\n  // КЛЮЧЕВОЕ: всегда стартуем с 0% (пользователь просил, чтобы новое наведение не \"подхватывало\" прошлую прокрутку)\n  translateY = 0\n  direction = 1\n  applyPosition(0)\n\n  pausedDueToInteractive = isPointerOverInteractive()\n\n  // старт анимации RAF\n  if (rafId) cancelAnimationFrame(rafId)\n  animating = true\n  lastTs = 0\n  rafId = requestAnimationFrame(step)\n  log('animation started (forced reset to 0%)')\n}\n\nconst stopAnimationAndReturn = () => {\n  // Останавливаем RAF и помечаем, что сейчас возвращаемся\n  animating = false; pausedDueToInteractive = false\n  if (rafId) { cancelAnimationFrame(rafId); rafId = null }\n  const img = imageRef.value; if (!img) return\n\n  // Если уже вверху — просто очистим стейт\n  if (translateY === 0) {\n    img.style.transition = ''\n    img.style.willChange = ''\n    translateY = 0; direction = 1; lastTs = 0\n    returning = false\n    return\n  }\n\n  returning = true\n\n  // Плавный CSS-возврат\n  img.style.transition = 'object-position 600ms cubic-bezier(.22,.9,.35,1), transform 600ms cubic-bezier(.22,.9,.35,1)'\n  img.style.objectPosition = `${HORIZONTAL_POS} 0%`\n  img.style.transform = ''\n\n  // Удаляем старый обработчик, если есть\n  if (img._tmpl_return_end) img.removeEventListener('transitionend', img._tmpl_return_end)\n\n  const onEnd = (e) => {\n    if (!e.propertyName || e.propertyName.includes('object') || e.propertyName.includes('transform')) {\n      img.style.transition = ''\n      img.style.willChange = ''\n      translateY = 0; direction = 1; lastTs = 0\n      returning = false\n      img.removeEventListener('transitionend', onEnd)\n      img._tmpl_return_end = null\n      log('returned to top (transition end)')\n    }\n  }\n  img._tmpl_return_end = onEnd\n  img.addEventListener('transitionend', onEnd)\n}\n\nconst onPointerEnter = (e) => startAnimation(e)\nconst onPointerLeave = () => stopAnimationAndReturn()\n\nonMounted(() => {\n  const img = imageRef.value; const wrapper = imageWrapperRef.value\n  if (img) {\n    img.style.objectPosition = `${HORIZONTAL_POS} 0%`\n    img.style.willChange = 'object-position'\n    // оставляем слушатель, он может сработать до hover\n    if (!img.complete) img.addEventListener('load', updateBounds)\n    else updateBounds()\n  }\n  if (wrapper) {\n    wrapper.addEventListener('pointerenter', onPointerEnter)\n    wrapper.addEventListener('pointerleave', onPointerLeave)\n    wrapper.addEventListener('pointermove', onPointerMove)\n  }\n  window.addEventListener('resize', updateBounds)\n})\n\nonBeforeUnmount(() => {\n  if (rafId) cancelAnimationFrame(rafId)\n  const img = imageRef.value; const wrapper = imageWrapperRef.value\n  if (img) img.removeEventListener('load', updateBounds)\n  if (wrapper) {\n    wrapper.removeEventListener('pointerenter', onPointerEnter)\n    wrapper.removeEventListener('pointerleave', onPointerLeave)\n    wrapper.removeEventListener('pointermove', onPointerMove)\n  }\n  window.removeEventListener('resize', updateBounds)\n})\n</script>\n\n\n<template>\n  <div class=\"template-card\" role=\"group\" tabindex=\"0\">\n    <div class=\"template-card__image\" ref=\"imageWrapperRef\">\n      <img ref=\"imageRef\" :src=\"template.image\" :alt=\"template.title\" loading=\"lazy\" draggable=\"false\" />\n\n      <!-- Бейджи: \"Заказной\" слева от \"Популярный\" -->\n      <div class=\"template-card__badges\">\n        <div v-if=\"!inlineBuild\" class=\"template-card__badge template-card__badge--custom\">Заказной</div>\n        <div v-if=\"template.popular\" class=\"template-card__badge template-card__badge--popular\">Популярный</div>\n      </div>\n\n      <button \n        class=\"template-card__view-button\" \n        type=\"button\" \n        aria-label=\"Просмотреть шаблон\" \n        @click.stop=\"viewTemplate(template.preview)\"\n      >\n        Просмотреть \n        <OpenNext class=\"open-next__svg\" />\n      </button>\n    </div>\n\n    <div class=\"template-card__content\">\n      <div class=\"template-card__header\">\n        <h3 class=\"template-card__title\">{{ template.title }}</h3>\n        <div class=\"template-card__price\" aria-live=\"polite\">\n          <template v-if=\"computedDiscountAmount > 0\">\n            <div style=\"text-align: right\">\n              <div style=\"font-size:0.9rem; color:#64748b; text-decoration: line-through;\">{{ fmt(price) }} ₽</div>\n              <div style=\"font-size:1.2rem; font-weight:700; color:#f97315;\">{{ fmt(finalPrice) }} ₽</div>\n              <div style=\"font-size:0.8rem; color:#065f46;\">Скидка: <span v-if=\"discountPercent > 0\"> {{ discountPercent }}%</span></div>\n            </div>\n          </template>\n          <template v-else>{{ fmt(price) }} ₽</template>\n        </div>\n      </div>\n\n      <p class=\"template-card__description\">{{ template.description }}</p>\n      <div class=\"template-card__features\">\n        <span v-for=\"(feature, idx) in template.features\" :key=\"idx\" class=\"template-card__feature\">{{ feature }}</span>\n      </div>\n\n      <Button class=\"template-card__button button button--primary\" :disabled=\"loading\" @click=\"buyTemplate(template.id)\">{{ loading ? 'Покупка...' : 'Купить шаблон' }}</Button>\n    </div>\n  </div>\n</template>\n\n<style scoped>\n.template-card { background: white; border-radius: 12px; overflow: hidden; box-shadow: 0 4px 12px rgba(0,0,0,0.05); transition: transform 0.3s ease; height: 100%; cursor: default; outline: none }\n.template-card:hover { transform: translateY(-5px); box-shadow: 0 8px 20px rgba(0,0,0,0.1) }\n.template-card__image { position: relative; height: 220px; overflow: hidden; cursor: pointer }\n.template-card__image img { width: 100%; height: 100%; object-fit: cover; object-position: 0% 0%; transition: object-position 600ms cubic-bezier(.22,.9,.35,1), transform 600ms cubic-bezier(.22,.9,.35,1); will-change: object-position; user-select: none; pointer-events: none; display: block }\n\n/* Контейнер для бейджей: справа вверху, элементы располагаются слева->справа,\n   поэтому сначала рендерим \"Заказной\", затем \"Популярный\" => заказной будет слева. */\n.template-card__badges { position: absolute; top: 15px; right: 15px; display: flex; gap: 8px; align-items: center; z-index: 3 }\n\n/* Одиночный бейдж — общий стиль */\n.template-card__badge { background: #f97316; color: white; padding: 5px 15px; border-radius: 20px; font-size: 0.85rem; font-weight: 600; white-space: nowrap }\n\n/* Модификаторы (если хотите разные цвета) */\n.template-card__badge--custom { background: #2663eb } /* teal-ish для \"Заказной\" */\n.template-card__badge--popular { background: #f97316 } /* оранжевый для \"Популярный\" */\n\n.template-card__content { padding: 20px; display:flex; flex-direction: column; height: calc(100% - 220px) }\n.template-card__header { display:flex; justify-content: space-between; align-items:flex-start; margin-bottom:15px }\n.template-card__title { font-size: 1.25rem; font-weight:600; color:#1e293b; margin-right:10px }\n.template-card__price { font-size:1.2rem; font-weight:700; color:#2563eb; white-space:nowrap }\n.template-card__description { color:#64748b; margin-bottom:15px; line-height:1.5; flex-grow:1 }\n.template-card__features { display:flex; flex-wrap:wrap; gap:8px; margin-bottom:20px }\n.template-card__feature { background:#f1f5f9; padding:6px 12px; border-radius:6px; font-size:0.85rem; color:#475569 }\n.template-card__button { width:100%; padding:12px; font-weight:600; border-radius:8px }\n.template-card__view-button { position:absolute; left:50%; top:50%; transform:translate(-50%,-50%); padding:10px 18px; border-radius:8px; border:none; background:rgba(0,0,0,0.55); color:#fff; font-weight:600; font-size:1rem; cursor:pointer; z-index:4; opacity:0; visibility:hidden; transition: opacity .25s ease, transform .25s ease, visibility .25s; pointer-events:auto }\n.template-card:hover .template-card__view-button, .template-card:focus-within .template-card__view-button { opacity:1; visibility:visible; transform:translate(-50%,-50%) }\n@media (max-width:576px) { .template-card__view-button { transform:translate(-50%,0); opacity:1; visibility:visible; background:rgba(0,0,0,0.45); pointer-events:auto } .template-card__header { flex-direction:column; align-items:flex-start; gap:5px } .template-card__price { font-size:1.1rem } }\n</style>\n","<script setup>\nimport TemplateCard from '@/components/portfolio/TemplateCard.vue'\nimport { ref, computed, onMounted, watch, onBeforeUnmount } from 'vue'\nimport { useTemplateStore } from '~/stores/template'\n\nconst props = defineProps({\n  activeFilter: {\n    type: String,\n    required: true\n  }\n})\n\nconst templateStore = useTemplateStore()\n\n// локальные фильтры (можно расширить)\nconst filters = ref([\n  { id: 'all', name: 'Все шаблоны' },\n])\n\n// Загрузка шаблонов (offset-пагинация, первая страница)\nconst loadTemplates = async () => {\n  try {\n    const filtersObj = {}\n    if (props.activeFilter && props.activeFilter !== 'all') {\n      filtersObj.type = props.activeFilter\n    }\n    await templateStore.listTemplates({ page: 1, perPage: 12, filters: filtersObj })\n  } catch (e) {\n    // ошибка уже хранится в store (templateStore.error)\n    console.error('Ошибка загрузки шаблонов:', e)\n  }\n}\n\n// загрузим при монтировании\nonMounted(async () => {\n  await loadTemplates()\n})\n\n// если внешний activeFilter изменился — перезагрузим список\nwatch(() => props.activeFilter, async () => {\n  await loadTemplates()\n})\n\n// вычисляемый список уже отфильтрованных шаблонов (по type)\nconst filteredTemplates = computed(() => {\n  const items = templateStore.templates || []\n  if (props.activeFilter === 'all') return items\n  return items.filter(t => String(t.type) === String(props.activeFilter))\n})\n\n// сколько скелетонов показывать во время загрузки / при пустом результате\nconst skeletonCount = 12\n\n/* ---------------------------\n   АНИМАЦИЯ СЧЁТЧИКА\n   --------------------------- */\nconst displayCount = ref(0)               // видимое число (анимируемое)\nlet rafId = null                          // id requestAnimationFrame для отмены\nlet animStart = 0\nlet animFrom = 0\nlet animTo = 0\nlet animDuration = 600                    // длительность анимации в мс (подкорректируйте)\n\nconst easeOutCubic = t => 1 - Math.pow(1 - t, 3)\n\n// функция запускает анимацию от текущего displayCount до target\nfunction animateTo(target, duration = animDuration) {\n  if (rafId !== null) {\n    cancelAnimationFrame(rafId)\n    rafId = null\n  }\n  animStart = performance.now()\n  animFrom = displayCount.value\n  animTo = target\n  animDuration = duration\n\n  const step = (now) => {\n    const elapsed = now - animStart\n    const t = Math.min(1, elapsed / animDuration)\n    const eased = easeOutCubic(t)\n    const value = Math.round(animFrom + (animTo - animFrom) * eased)\n    displayCount.value = value\n    if (t < 1) {\n      rafId = requestAnimationFrame(step)\n    } else {\n      rafId = null\n      displayCount.value = animTo // гарантированно выставим точное значение\n    }\n  }\n  rafId = requestAnimationFrame(step)\n}\n\n// Отменяем анимацию при размонтировании\nonBeforeUnmount(() => {\n  if (rafId !== null) {\n    cancelAnimationFrame(rafId)\n    rafId = null\n  }\n})\n\n// вспомогательная функция для правильного склонения \"шаблон(ов)\"\nfunction pluralTemplates(n) {\n  const mod10 = n % 10\n  const mod100 = n % 100\n  if (mod10 === 1 && mod100 !== 11) return 'шаблон'\n  if (mod10 >= 2 && mod10 <= 4 && !(mod100 >= 12 && mod100 <= 14)) return 'шаблона'\n  return 'шаблонов'\n}\n\n/* Логика: если идёт загрузка — показываем \"… шаблонов\".\n   После окончания загрузки (templateStore.loading -> false) — анимируем до текущего filteredTemplates.length.\n   Также анимируем при изменении filteredTemplates.length (если не в состоянии загрузки). */\n\n// Инициализация начального значения (если не в загрузке — устанавливаем сразу)\nif (!templateStore.loading) {\n  displayCount.value = filteredTemplates.value.length\n} else {\n  displayCount.value = 0\n}\n\n// следим за изменением количества шаблонов (и за состоянием загрузки)\nwatch(\n  () => filteredTemplates.value.length,\n  (newCount, oldCount) => {\n    // если в момент изменения не идёт загрузка — анимируем\n    if (!templateStore.loading) {\n      animateTo(newCount)\n    }\n  }\n)\n\nwatch(\n  () => templateStore.loading,\n  (isLoading, prev) => {\n    // когда загрузка завершилась (true -> false) — анимируем до актуального количества\n    if (prev === true && isLoading === false) {\n      const target = filteredTemplates.value.length\n      animateTo(target)\n    }\n    // если начали загрузку — можно временно обнулить или оставить текущее. Оставим отображать \"…\" в шаблоне.\n  }\n)\n</script>\n\n<template>\n  <section class=\"portfolio-grid\" :aria-busy=\"templateStore.loading ? 'true' : 'false'\">\n    <div class=\"portfolio-grid__container container\">\n      <div class=\"portfolio-grid__header\">\n        <h2 class=\"portfolio-grid__title\">\n          <template v-if=\"templateStore.loading\">… шаблонов</template>\n          <template v-else>{{ displayCount }} {{ pluralTemplates(displayCount) }}</template>\n          <span v-if=\"!templateStore.loading && activeFilter !== 'all'\">\n            в категории \"{{ filters.find(f => f.id === activeFilter)?.name || activeFilter }}\"\n          </span>\n          <span v-else-if=\"templateStore.loading && activeFilter !== 'all'\">\n            <small class=\"portfolio-grid__loading-hint\">в категории «{{ filters.find(f => f.id === activeFilter)?.name || activeFilter }}»</small>\n          </span>\n        </h2>\n      </div>\n\n      <!-- Показываем скелетоны когда идёт загрузка -->\n      <div v-if=\"templateStore.loading\" class=\"portfolio-grid__content\">\n        <div\n          v-for=\"n in skeletonCount\"\n          :key=\"'skeleton-loading-' + n\"\n          class=\"skeleton-card\"\n          role=\"status\"\n          aria-label=\"Загрузка шаблона\"\n        >\n          <div class=\"skeleton-card__thumb shimmer\"></div>\n          <div class=\"skeleton-card__body\">\n            <div class=\"skeleton-line skeleton-line--title shimmer\"></div>\n            <div class=\"skeleton-line skeleton-line--meta shimmer\"></div>\n            <div class=\"skeleton-line skeleton-line--meta short shimmer\"></div>\n          </div>\n        </div>\n      </div>\n\n      <!-- Ошибка -->\n      <div v-else-if=\"templateStore.error\" class=\"portfolio-grid__empty\">\n        Ошибка: {{ templateStore.error }}\n      </div>\n\n      <!-- Если результатов нет — не показываем текст \"Шаблоны не найдены\",\n           а выводим тот же набор карточек-заглушек (скелетонов) вместо изображений -->\n      <div v-else-if=\"filteredTemplates.length === 0\" class=\"portfolio-grid__content\">\n        <div\n          v-for=\"n in skeletonCount\"\n          :key=\"'skeleton-empty-' + n\"\n          class=\"skeleton-card\"\n          role=\"status\"\n          aria-label=\"Пустая карта шаблона — заглушка\"\n        >\n          <div class=\"skeleton-card__thumb shimmer\"></div>\n          <div class=\"skeleton-card__body\">\n            <div class=\"skeleton-line skeleton-line--title shimmer\"></div>\n            <div class=\"skeleton-line skeleton-line--meta shimmer\"></div>\n            <div class=\"skeleton-line skeleton-line--meta short shimmer\"></div>\n          </div>\n        </div>\n      </div>\n\n      <!-- Нормальный список шаблонов -->\n      <div v-else class=\"portfolio-grid__content\">\n        <TemplateCard \n          v-for=\"template in filteredTemplates\" \n          :key=\"template.id\"\n          :template=\"template\"\n        />\n      </div>\n    </div>\n  </section>\n</template>\n\n<style scoped>\n.portfolio-grid {\n  padding: 50px 0;\n}\n\n.portfolio-grid__header {\n  margin-bottom: 30px;\n}\n\n.portfolio-grid__title {\n  font-size: 1.8rem;\n  color: var(--dark);\n  font-weight: 700;\n  display: flex;\n  align-items: baseline;\n  gap: 10px;\n}\n\n.portfolio-grid__title span {\n  color: var(--primary);\n}\n\n.portfolio-grid__content {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));\n  gap: 30px;\n}\n\n/* Скелетонная карточка — визуально похожа на TemplateCard */\n.skeleton-card {\n  background: var(--card-bg, #fff);\n  border-radius: 12px;\n  padding: 16px;\n  box-shadow: 0 6px 18px rgba(30,30,30,0.04);\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n  min-height: 220px;\n  overflow: hidden;\n}\n\n/* блок изображения */\n.skeleton-card__thumb {\n  width: 100%;\n  height: 140px;\n  border-radius: 8px;\n  background: linear-gradient(90deg, rgba(200,200,200,0.12), rgba(200,200,200,0.08));\n  position: relative;\n}\n\n/* тело */\n.skeleton-card__body {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n  padding-top: 4px;\n}\n\n/* линии (title / meta) */\n.skeleton-line {\n  height: 14px;\n  border-radius: 7px;\n  background: linear-gradient(90deg, rgba(200,200,200,0.12), rgba(200,200,200,0.08));\n  width: 100%;\n}\n\n/* более толстая линия для названия */\n.skeleton-line--title {\n  height: 18px;\n  border-radius: 9px;\n  width: 70%;\n}\n\n/* мета линии */\n.skeleton-line--meta {\n  height: 12px;\n  width: 50%;\n}\n\n.skeleton-line--meta.short {\n  width: 30%;\n}\n\n/* shimmer animation */\n@keyframes shimmer {\n  0% {\n    transform: translateX(-100%);\n  }\n  100% {\n    transform: translateX(100%);\n  }\n}\n\n.shimmer {\n  position: relative;\n  overflow: hidden;\n}\n\n.shimmer::after {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: -150%;\n  width: 150%;\n  height: 100%;\n  background: linear-gradient(90deg, rgba(255,255,255,0), rgba(255,255,255,0.35), rgba(255,255,255,0));\n  animation: shimmer 1.2s ease-in-out infinite;\n}\n\n/* responsive adjustments */\n@media (max-width: 992px) {\n  .portfolio-grid__content {\n    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));\n    gap: 25px;\n  }\n  \n  .portfolio-grid__title {\n    font-size: 1.6rem;\n  }\n}\n\n@media (max-width: 576px) {\n  .portfolio-grid__content {\n    grid-template-columns: 1fr;\n  }\n  \n  .portfolio-grid__title {\n    font-size: 1.4rem;\n  }\n}\n\n.portfolio-grid__loading,\n.portfolio-grid__empty {\n  text-align: center;\n  padding: 60px 20px;\n  color: var(--gray);\n  font-size: 1.2rem;\n}\n\n.portfolio-grid__loading-hint {\n  display: inline-block;\n  margin-left: 12px;\n  font-weight: 500;\n  color: var(--gray);\n  font-size: 0.95rem;\n}\n</style>\n","<script setup>\nconst title = \"Нужен уникальный дизайн?\"\nconst subtitle = \"Разработаем эксклюзивный сайт специально для вас\"\n</script>\n\n<template>\n  <section class=\"portfolio-cta\">\n    <div class=\"portfolio-cta__container container\">\n      <div class=\"portfolio-cta__content\">\n        <h2 class=\"portfolio-cta__title\">{{ title }}</h2>\n        <p class=\"portfolio-cta__subtitle\">{{ subtitle }}</p>\n        <button class=\"portfolio-cta__button button button--primary\">\n          Заказать дизайн\n        </button>\n      </div>\n    </div>\n  </section>\n</template>\n\n<style scoped>\n.portfolio-cta {\n  padding: 80px 0;\n  background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);\n  color: white;\n  text-align: center;\n}\n\n.portfolio-cta__content {\n  max-width: 700px;\n  margin: 0 auto;\n}\n\n.portfolio-cta__title {\n  font-size: 2.2rem;\n  margin-bottom: 15px;\n  font-weight: 700;\n}\n\n.portfolio-cta__subtitle {\n  font-size: 1.2rem;\n  opacity: 0.9;\n  margin-bottom: 30px;\n}\n\n.portfolio-cta__button {\n  padding: 14px 40px;\n  font-size: 1.1rem;\n  font-weight: 600;\n}\n\n@media (max-width: 768px) {\n  .portfolio-cta {\n    padding: 60px 0;\n  }\n  \n  .portfolio-cta__title {\n    font-size: 1.8rem;\n  }\n  \n  .portfolio-cta__subtitle {\n    font-size: 1.1rem;\n  }\n}\n</style>","<script setup>\nimport PortfolioHero from '@/components/portfolio/PortfolioHero.vue'\nimport PortfolioFilters from '@/components/portfolio/PortfolioFilters.vue'\nimport PortfolioGrid from '@/components/portfolio/PortfolioGrid.vue'\nimport PortfolioCTA from '@/components/portfolio/PortfolioCTA.vue'\n\n// Состояние фильтра (для примера, лучше использовать Pinia)\nconst activeFilter = ref('all')\n</script>\n\n<template>\n  <div class=\"portfolio-page\">\n    <PortfolioHero />\n    <PortfolioFilters v-model:active-filter=\"activeFilter\" />\n    <PortfolioGrid :active-filter=\"activeFilter\" />\n    <PortfolioCTA />\n  </div>\n</template>\n\n<style scoped>\n.portfolio-page {\n  background: #f8fafc;\n}\n</style>"],"names":["title","subtitle","_ssrRenderAttrs","_mergeProps","_ssrIncludeBooleanAttr","_unref","_ssrInterpolate","_ssrRenderList","_ssrRenderComponent","_push","_parent"],"mappings":"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"}